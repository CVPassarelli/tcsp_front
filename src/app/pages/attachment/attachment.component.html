<div class="px-10 py-10 space-y-5">
  <h1 class="text-center text-2xl font-bold">Upload e listagem de documentos</h1>
  <div class=" w-full flex justify-end">
    <button class="bg-green-300 py-2 px-4 hover:bg-green-500" (click)="addItem()">Adicionar novo arquivo</button>
  </div>
  <ng-container *ngIf="files$ | async as files">
    <div class="flex flex-row gap-3">
      <ng-container *ngFor="let file of files">

        <div class="basis-1/12 shadow-lg py-3 px-4 relative">
          <button
            class="bg-slate-900 absolute w-3 h-3 flex justify-center items-center p-2 rounded-full text-white top-1 right-2"
            (click)="deleteFileSelected(file.id)"><fa-icon class="text-xs" [icon]="faClose">
            </fa-icon></button>
          <div class="w-full py-4 p-3 border-2 flex justify-center items-center flex-col">
            <fa-icon class="text-3xl m-auto" [icon]="faFileUpload">
            </fa-icon>
            <p>{{file.nomeArquivo}}</p>
          </div>


        </div>


      </ng-container>
    </div>
  </ng-container>
  <form [formGroup]=" form" (ngSubmit)="submitForm()" class="space-y-5">
    <div formArrayName="arquivos" *ngFor="let item of fileControl.controls; let i = index">
      <div class="flex flex-col space-y-4" [formGroupName]="i">
        <div>
          <app-input-select [error]="getValidity(i)" label="Tipo de documento" formControlName="tipoDocumento"
            [options]="tipoDocumento">
          </app-input-select>
        </div>
        <div>
          <label for="upload{{+i}}">
            <div class="w-full p-5 flex flex-col items-center justify-center rounded-md bg-slate-100 cursor-pointer">
              <fa-icon class="text-2xl" [icon]="faFileUpload">
              </fa-icon>
              <p>Selecionar arquivos</p>

            </div>
            <input id="upload{{+i}}" class="hidden" type="file" formControlName="arquivo"
              (change)="selectFile($event, i)">
          </label>

        </div>
        <div class="mt-3">
          <div *ngIf="convertedFileList[i]" class="border-2 flex justify-between w-full py-3 px-5">
            <span class="truncate basis-1/3">{{convertedFileList[i].tituloDocumento}}</span>
            <span class="truncate basis-1/3 text-right">
              <fa-icon class="text-xl cursor-pointer" [icon]="faClose" (click)="removeFile(i)">
              </fa-icon>
            </span>
          </div>
        </div>




      </div>

    </div>
    <div class="w-full justify-end flex mt-5">
      <button
        class="border border-blue-600 py-1 px-4 rounded-md bg-blue-100 hover:bg-blue-200 cursor-pointer disabled:bg-slate-300 disabled:border-slate-600 disabled:cursor-not-allowed"
        [disabled]="false">Save</button>
    </div>
  </form>
</div>
